import{S as h,i as b}from"./assets/vendor-46aac873.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function l(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerpolicy&&(e.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?e.credentials="include":r.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function a(r){if(r.ep)return;r.ep=!0;const e=l(r);fetch(r.href,e)}})();const t={form:document.querySelector(".form"),input:document.querySelector(".input"),gallery:document.querySelector(".gallery"),loader:document.querySelector(".loader"),searchBtn:document.querySelector(".btn"),btnMore:document.querySelector(".load-btn"),preloader:document.getElementById("preloader")},L="https://pixabay.com/api/",v="41991385-9b19b8bb3d6f1491499417d17";function u({query:o,page:s=1,per_page:l}){const a=`${L}?key=${v}&q=${o}&image_type=photo&orientation=horizontal&safesearch=true`;return axios.get(a,{params:{page:s,per_page:l}}).then(({data:r})=>r)}function f(o,s){const l=o.map(({webformatURL:a,largeImageURL:r,tags:e,likes:i,views:p,comments:y,downloads:g})=>`
        <li class="gallery-item">
          <a class="gallery-link" href="${r}">
            <img
              class="gallery-image"
              src="${a}"
              alt="${e}"
            />
            <ul class="gallery-info">
              <li class="gallery-info-item">Likes: <span class="descr-span">${i}</span></li>
              <li class="gallery-info-item">Views: <span class="descr-span">${p}</span></li>
              <li class="gallery-info-item">Comments: <span class="descr-span">${y}</span></li>
              <li class="gallery-info-item">Downloads: <span class="descr-span">${g}</span></li>
            </ul> 
          </a>
        </li>`).join("");s.insertAdjacentHTML("beforeend",l)}function m(){window.scrollBy({top:2*document.querySelector(".gallery-item").getBoundingClientRect().height,behavior:"smooth"})}const d="is-hidden";function M(o){o.classList.add(d)}function q(o){o.classList.remove(d)}function S(o,s){loader.classList.add(d),o.disabled=!1}function w(o,s){loader.classList.remove(d),o.disabled=!0}const c={hide:M,show:q,enable:S,disable:w};new h(".gallery-item a",{captionsData:"alt",captionDelay:250});const n={query:"",page:1,maxPage:0,per_page:15};t.form.addEventListener("submit",$);async function $(o){if(o.preventDefault(),t.gallery.innerHTML="",n.page=1,n.query=t.input.value.trim(),r(),!n.query){s("The search field can't be empty! Please, enter your request!");return}function s(e){b.show({class:"error-svg",position:"topRight",icon:"error-svg",message:e,maxWidth:"432",messageColor:"#fff",messageSize:"16px",backgroundColor:"#EF4040",close:!1,closeOnClick:!0})}try{const{hits:e,totalHits:i}=await u(n);n.maxPage=Math.ceil(i/n.per_page),f(e,t.gallery),gallery.refresh(),e.length>0&&e.length!==i?(c.show(t.btnMore),t.btnMore.addEventListener("click",l),a()):(c.hide(t.btnMore),s("We are sorry, but you've reached the end of search results"))}catch(e){console.log(e)}finally{a(),t.form.reset(),m()}async function l(){n.page+=1,r(),c.disable(t.btnMore);try{const{hits:e}=await u(n);f(e,t.gallery)}catch(e){console.log(e)}finally{a(),c.enable(t.btnMore),n.page===n.maxPage&&(c.hide(t.btnMore),t.btnMore.removeEventListener("click",l),s("We are sorry, but you've reached the end of search results")),m()}}function a(){setTimeout(()=>{t.loader.classList.add("is-hidden")},500)}function r(){t.loader.classList.remove("is-hidden")}}
//# sourceMappingURL=commonHelpers.js.map
