import{S as m,i as g}from"./assets/vendor-46aac873.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function o(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=o(e);fetch(e.href,r)}})();const t={form:document.querySelector(".form"),input:document.querySelector(".input"),gallery:document.querySelector(".gallery"),loader:document.querySelector(".loader"),searchBtn:document.querySelector(".button"),btnMore:document.querySelector(".load-btn")},p="https://pixabay.com/api/",b="41991385-9b19b8bb3d6f1491499417d17";function f({query:c,page:i=1,per_page:o}){const s=`${p}?key=${b}&q=${c}&image_type=photo&orientation=horizontal&safesearch=true`;return axios.get(s,{params:{page:i,per_page:o}}).then(({data:e})=>e)}function h(c){return c.map(({webformatURL:i,largeImageURL:o,tags:s,likes:e,views:r,comments:n,downloads:u})=>`
        <li class="gallery-item">
          <a class="gallery-link" href="${o}">
            <img
              class="gallery-image"
              src="${i}"
              alt="${s}"
            />
            <ul class="gallery-info">
              <li class="gallery-info-item">Likes: <span class="descr-span">${e}</span></li>
              <li class="gallery-info-item">Views: <span class="descr-span">${r}</span></li>
              <li class="gallery-info-item">Comments: <span class="descr-span">${n}</span></li>
              <li class="gallery-info-item">Downloads: <span class="descr-span">${u}</span></li>
            </ul> 
          </a>
        </li>`).join("")}function y(){window.scrollBy({top:2*document.querySelector(".gallery-item").getBoundingClientRect().height,behavior:"smooth"})}new m(".gallery-item a",{captionsData:"alt",captionDelay:250});const l={query:"",page:1,maxPage:0,per_page:15};t.form.addEventListener("submit",L);async function L(c){c.preventDefault(),t.gallery.innerHTML="",l.page=1;const i=t.input.value.trim();if(r(),u(),!i){o("The search field can't be empty! Please, enter your request!");return}function o(a){g.show({class:"error-svg",position:"topRight",icon:"error-svg",message:a,maxWidth:"432",messageColor:"#fff",messageSize:"16px",backgroundColor:"#EF4040",close:!1,closeOnClick:!0})}try{const{hits:a,totalHits:d}=await f(l);l.maxPage=Math.ceil(d/l.per_page),t.gallery.insertAdjacentHTML("beforeend",h(a)),gallery.refresh(),a.length===0?(o("Sorry, there are no images matching your search query. Please, try again!"),e(),n()):a.length>0&&a.length!==d?(u(),t.btnMore.addEventListener("click",s)):(n(),o("We are sorry, but you've reached the end of search results"))}catch{o("Sorry, there is a problem with connection with the server")}finally{e(),t.form.reset(),y()}async function s(){l.page+=1,r(),t.btnMore.disabled=!0;try{const{hits:a}=await f(l);t.gallery.insertAdjacentHTML("beforeend",h(a)),t.gallery.refresh(),data.hits.length>0?(u(),t.btnMore.addEventListener("click",s)):(n(),o("We're sorry, but you've reached the end of search results"))}catch{o("Sorry, there is a problem with connection with the server")}finally{e(),t.btnMore.disabled=!1,l.page===l.maxPage&&(o("We are sorry, but you've reached the end of search results"),n(),t.btnMore.removeEventListener("click",s)),y()}}function e(){setTimeout(()=>{t.loader.classList.add("hidden")},500)}function r(){t.loader.classList.remove("hidden")}function n(){setTimeout(()=>{t.btnMore.classList.add("hidden")},500)}function u(){t.btnMore.classList.remove("hidden")}}
//# sourceMappingURL=commonHelpers.js.map
